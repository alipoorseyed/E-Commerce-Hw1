# شبیه‌سازی رقابت قیمت و تبلیغات در بازار آنلاین با استفاده از نظریه بازی‌ها و شبکه‌های اجتماعی

**نام و نام خانوادگی:** سید علی پورسید  
**شماره دانشجویی:** 40331576  
**عنوان پروژه:** بهینه‌سازی رقابت قیمت و تبلیغات در بازار آنلاین با استفاده از Game Theory و Social Networking  

---

## چکیده

این پروژه به شبیه‌سازی رقابت بین فروشندگان در یک بازار آنلاین می‌پردازد که در آن هر فروشنده دو تصمیم اساسی دارد: تعیین قیمت محصول و تخصیص بودجه به تبلیغات. با استفاده از مفاهیم نظریه بازی‌ها، تعادل نش برای این رقابت محاسبه شده و تأثیر شبکه‌های اجتماعی بر تقاضا و سود فروشندگان مورد بررسی قرار گرفته است. داده‌های واقعی از یک فروشگاه آنلاین با بیش از یک میلیون تراکنش استفاده شده است.

---

## 1. مقدمه

### 1.1. بیان مسئله

در بازارهای آنلاین، فروشندگان با محصولات مشابه در رقابت هستند و باید استراتژی‌های قیمت‌گذاری و تبلیغات خود را بهینه کنند. مشتریان تصمیم خرید خود را بر اساس سه عامل اصلی اتخاذ می‌کنند:

1. قیمت محصول
2. میزان تبلیغات
3. تأثیر اجتماعی (توصیه‌های دیگر مشتریان و اینفلوئنسرها)

این پروژه به دنبال پاسخ به سؤالات زیر است:

- در یک بازار رقابتی، استراتژی بهینه قیمت‌گذاری و تبلیغات برای هر فروشنده چیست؟
- تعادل نش در این بازی چگونه تعیین می‌شود؟
- شبکه‌های اجتماعی چه تأثیری بر سود فروشندگان دارند؟

### 1.2. اهداف پروژه

- پیاده‌سازی مدل ریاضی تابع تقاضا و سود
- محاسبه تعادل نش با استفاده از ماتریس‌های سود
- تحلیل تأثیر شبکه اجتماعی مشتریان بر تقاضا
- تصویرسازی نتایج و تفسیر یافته‌ها

---

## 2. مبانی نظری

### 2.1. نظریه بازی‌ها (Game Theory)

نظریه بازی‌ها مطالعه مدل‌های ریاضی تعامل استراتژیک بین عوامل منطقی است. در این پروژه، دو فروشنده (بازیکن) در یک بازی همزمان شرکت دارند که هر کدام باید استراتژی خود را بدون اطلاع از انتخاب طرف مقابل تعیین کنند.


### 2.2. شبکه‌های اجتماعی (Social Networks)

شبکه‌های اجتماعی می‌توانند رفتار خرید مشتریان را تحت تأثیر قرار دهند. در این پروژه، از نظریه گراف برای مدل‌سازی ارتباطات بین مشتریان استفاده شده است.

---

## 3. روش‌شناسی


### 3.1 فضای استراتژی

برای هر فروشنده، فضای استراتژی شامل ترکیب قیمت و بودجه تبلیغات است:

- قیمت: 10 مقدار در بازه [3.0, 8.0]
- بودجه تبلیغات: 6 مقدار در بازه [5.0, 35.0]
- تعداد کل استراتژی‌ها: $10 \times 6 = 60$

بنابراین، برای دو فروشنده، فضای حالت کل $60 \times 60 = 3600$ حالت دارد.

### 3.2 محاسبه Influence Score

برای محاسبه تأثیر شبکه اجتماعی، گرافی از مشتریان ساخته شد که در آن:

- هر نود نشان‌دهنده یک مشتری است
- یال بین دو نود وجود دارد اگر آن دو مشتری حداقل یک محصول مشترک خریده باشند
- درجه هر نود نشان‌دهنده تعداد ارتباطات آن مشتری است

Influence Score به صورت زیر محاسبه می‌شود:

$$\text{Influence Score} = \frac{\text{میانگین درجه نودها}}{\text{تعداد کل مشتریان}}$$

---

## 4. پیاده‌سازی

### 4.1. Task I: آماده‌سازی داده‌ها

داده‌ها از فایل Excel با دو Sheet خوانده شدند که شامل اطلاعات زیر بودند:

- Invoice: شماره فاکتور
- StockCode: کد کالا
- Description: توضیحات کالا
- Quantity: تعداد خریداری شده
- InvoiceDate: تاریخ فاکتور
- Price: قیمت هر واحد
- CustomerID: شناسه مشتری
- Country: کشور

پس از ترکیب دو Sheet، تعداد کل رکوردها به بیش از یک میلیون رسید. پیش‌پردازش شامل موارد زیر بود:

1. حذف مقادیر null
2. حذف مقادیر منفی برای Quantity و Price
3. حذف سطرهای تکراری

### 4.2. Task II: محاسبه تابع سود

در این مرحله، ماتریس‌های سود برای دو فروشنده محاسبه شدند. برای هر ترکیب از استراتژی‌های دو فروشنده، سود هر یک بر اساس تابع تقاضا و سود محاسبه شد. در این مرحله، Influence Score برابر صفر در نظر گرفته شد.

ماتریس سود فروشنده 1، یک ماتریس $60 \times 60$ است که سطر $i$ و ستون $j$ آن نشان‌دهنده سود فروشنده 1 است وقتی که فروشنده 1 استراتژی $i$ و فروشنده 2 استراتژی $j$ را انتخاب کند.

### 4.3. Task III: یافتن تعادل نش

برای یافتن تعادل نش، الگوریتم Best Response استفاده شد:

1. برای هر استراتژی فروشنده 2، بهترین پاسخ فروشنده 1 محاسبه شد
2. برای هر استراتژی فروشنده 1، بهترین پاسخ فروشنده 2 محاسبه شد
3. جفت استراتژی‌هایی که بهترین پاسخ متقابل باشند، تعادل نش هستند

### 4.4. Task IV: محاسبه تأثیر شبکه اجتماعی

یک گراف از مشتریان ساخته شد که در آن:

- تعداد نودها: تعداد مشتریان منحصر به فرد
- تعداد یال‌ها: تعداد ارتباطات بین مشتریان

سپس Influence Score محاسبه و تأثیر آن بر سود فروشندگان بررسی شد.

---

## 5. نتایج

### 5.1. آمار داده‌ها

پس از پیش‌پردازش:

- تعداد کل رکوردها: بیش از 500,000 تراکنش
- تعداد مشتریان منحصر به فرد: بستگی به داده‌های واقعی دارد
- تعداد محصولات منحصر به فرد: متنوع

### 5.2. ماتریس‌های سود

ماتریس‌های سود برای هر دو فروشنده محاسبه شدند. این ماتریس‌ها نشان می‌دهند که سود هر فروشنده چگونه به استراتژی خود و رقیب بستگی دارد.

<img width="4170" height="2967" alt="Image" src="https://github.com/user-attachments/assets/b5b9d83e-8b2a-4b44-b2c7-fb337170f48d" />
**شکل 1:** ماتریس سود فروشنده 1 (چپ) و فروشنده 2 (راست). رنگ سبز نشان‌دهنده سود بالا و رنگ قرمز نشان‌دهنده سود پایین است. نقاط ستاره‌ای آبی نشان‌دهنده تعادل‌های نش هستند. محور افقی نشان‌دهنده استراتژی رقیب و محور عمودی نشان‌دهنده استراتژی خود فروشنده است.

### 5.3. تعادل نش

تعادل‌های نش پیدا شده نشان می‌دهند که در چه نقاطی از فضای استراتژی، هیچ فروشنده‌ای انگیزه‌ای برای تغییر استراتژی ندارد. این نقاط معمولاً در نواحی متوسط قیمت و بودجه تبلیغات قرار دارند.

پارامترهای تعادل نش شامل:

- قیمت بهینه برای هر فروشنده
- بودجه تبلیغاتی بهینه
- سود حاصله در این نقطه

### 5.4. تحلیل استراتژی

نمودارهای تحلیل استراتژی نشان می‌دهند که:

1. افزایش قیمت تا حدی سود را افزایش می‌دهد، اما پس از آن به دلیل کاهش تقاضا، سود کاهش می‌یابد
2. افزایش بودجه تبلیغات تا یک نقطه بهینه مفید است، اما پس از آن هزینه‌ها بیش از منافع خواهد بود
3. تعادل نش در نقطه‌ای است که هر دو فروشنده به بهترین ترکیب قیمت و تبلیغات رسیده‌اند
<img width="4685" height="2068" alt="Image" src="https://github.com/user-attachments/assets/56a94144-2001-4f38-8216-a99190375e35" />

**شکل 2:** تحلیل استراتژی شامل چهار نمودار:
- بالا چپ: تأثیر قیمت بر سود با بودجه تبلیغات ثابت. خطوط عمودی نشان‌دهنده قیمت‌های تعادل نش هستند.
- بالا راست: تأثیر بودجه تبلیغات بر سود با قیمت ثابت. خطوط عمودی نشان‌دهنده بودجه‌های تعادل نش هستند.
- پایین چپ: مقایسه تقاضا در حالت بدون و با تأثیر شبکه اجتماعی.
- پایین راست: نمایش تعادل‌های نش در فضای دوبعدی قیمت-تبلیغات. نقاط ستاره‌ای رنگی نشان‌دهنده تعادل نش و نقاط خاکستری نشان‌دهنده تمام استراتژی‌های ممکن هستند.

### 5.5. شبکه اجتماعی مشتریان

گراف شبکه اجتماعی مشتریان ساخته شد که نشان می‌دهد مشتریان چگونه از طریق خریدهای مشترک به یکدیگر متصل هستند. پارامترهای شبکه عبارتند از:

- تعداد نودها (مشتریان)
- تعداد یال‌ها (ارتباطات)
- میانگین درجه
- Influence Score

توزیع درجات در شبکه نشان می‌دهد که چند مشتری با درجه بالا (اینفلوئنسرها) وجود دارند که تأثیر زیادی بر شبکه دارند.

<img width="2971" height="1769" alt="Image" src="https://github.com/user-attachments/assets/0b184312-78eb-47c3-b6af-79b8b3d8fe57" />

**شکل 3:** هیستوگرام توزیع درجات در شبکه مشتریان. محور افقی نشان‌دهنده تعداد ارتباطات هر مشتری و محور عمودی نشان‌دهنده فراوانی است. خط قرمز عمودی نشان‌دهنده میانگین درجه در شبکه است. این نمودار معمولاً یک توزیع نمایی یا توان دارد که نشان‌دهنده وجود تعداد کمی مشتری با ارتباطات زیاد (اینفلوئنسرها) و تعداد زیادی مشتری با ارتباطات کم است.

### 5.6. تأثیر شبکه اجتماعی بر سود

مقایسه سود در دو حالت:

1. بدون تأثیر شبکه اجتماعی (Influence Score = 0)
2. با تأثیر شبکه اجتماعی (Influence Score محاسبه شده از داده‌ها)

نتایج نشان می‌دهد که شبکه اجتماعی تأثیر مثبتی بر تقاضا و در نتیجه سود فروشندگان دارد. این تأثیر به دلیل توصیه‌های مشتریان به یکدیگر و تأثیرگذاری اینفلوئنسرها است.

---

## 6. بحث و نتیجه‌گیری

### 6.1. یافته‌های کلیدی

1. **وجود تعادل نش:** در بیشتر موارد، یک یا چند تعادل نش خالص وجود دارد که در آن هر دو فروشنده به نقطه بهینه خود رسیده‌اند.

2. **تأثیر قیمت:** کاهش بیش از حد قیمت منجر به افزایش تقاضا می‌شود، اما سود کل کاهش می‌یابد. افزایش بیش از حد قیمت نیز به دلیل کاهش شدید تقاضا، سود را کاهش می‌دهد.

3. **تأثیر تبلیغات:** افزایش بودجه تبلیغات تا یک نقطه بهینه مفید است. پس از آن، هزینه‌های اضافی تبلیغات بیشتر از افزایش تقاضا خواهد بود.

4. **تأثیر شبکه اجتماعی:** شبکه‌های اجتماعی تأثیر معناداری بر تقاضا و سود دارند. فروشندگانی که بتوانند از شبکه‌های اجتماعی به طور مؤثر استفاده کنند، سود بیشتری کسب می‌کنند.

### 6.2. محدودیت‌ها

1. **فرضیات ساده‌شده:** مدل ریاضی فرضیات ساده‌ای دارد و ممکن است تمام پیچیدگی‌های دنیای واقعی را در نظر نگیرد.

2. **تعداد فروشندگان:** فقط دو فروشنده در نظر گرفته شده است، در حالی که بازارهای واقعی ممکن است رقبای بیشتری داشته باشند.

3. **ایستایی مدل:** مدل ایستا است و تغییرات زمانی را در نظر نمی‌گیرد.

### 6.3. پیشنهادات برای تحقیقات آینده

1. **مدل‌های پویا:** استفاده از مدل‌های پویا که تغییرات زمانی را در نظر بگیرند.

2. **فروشندگان متعدد:** گسترش مدل به سه یا چند فروشنده.

3. **یادگیری ماشین:** استفاده از الگوریتم‌های یادگیری تقویتی برای یافتن استراتژی‌های بهینه.

4. **داده‌های واقعی‌تر:** استفاده از داده‌های بیشتر و دقیق‌تر از رفتار مشتریان.

---

## 7. نتیجه‌گیری نهایی

این پروژه نشان داد که نظریه بازی‌ها ابزار قدرتمندی برای تحلیل رقابت در بازارهای آنلاین است. با استفاده از مفهوم تعادل نش، می‌توان استراتژی‌های بهینه قیمت‌گذاری و تبلیغات را برای فروشندگان تعیین کرد. همچنین، شبکه‌های اجتماعی نقش مهمی در تقاضا و سود فروشندگان دارند که باید در استراتژی‌های بازاریابی در نظر گرفته شوند.

نتایج این پروژه می‌تواند برای فروشندگان آنلاین، پلتفرم‌های تجارت الکترونیک و محققان حوزه اقتصاد دیجیتال مفید باشد.

---

## 8. منابع

1. Nash, J. (1950). "Equilibrium points in n-person games". Proceedings of the National Academy of Sciences, 36(1), 48-49.

2. Osborne, M. J., & Rubinstein, A. (1994). "A course in game theory". MIT press.

3. Jackson, M. O. (2008). "Social and economic networks". Princeton university press.

4. Easley, D., & Kleinberg, J. (2010). "Networks, crowds, and markets: Reasoning about a highly connected world". Cambridge University Press.

5. Newman, M. E. (2018). "Networks". Oxford university press.

---

## پیوست‌ها

### پیوست A: کد برنامه

کد کامل پروژه در مخزن GitHub در دسترس است:

[لینک به مخزن GitHub]

### پیوست B: داده‌های استفاده شده

داده‌های این پروژه از مجموعه داده Online Retail II استخراج شده است که شامل اطلاعات فروش یک فروشگاه آنلاین در بازه زمانی 2009-2011 است.

### پیوست C: پارامترهای مدل

جدول پارامترهای استفاده شده در مدل:

| پارامتر | نماد | مقدار | توضیحات |
|---------|------|-------|---------|
| هزینه تولید | cost | 2.0 | هزینه ثابت تولید هر واحد |
| تقاضای پایه | base_demand | 100 | تقاضای اولیه بدون تبلیغات |
| ضریب تبلیغات | α | 2.0 | تأثیر بودجه تبلیغات بر تقاضا |
| ضریب قیمت | β | -15.0 | حساسیت تقاضا به اختلاف قیمت |
| ضریب شبکه | γ | 0.5 | تأثیر شبکه اجتماعی بر تقاضا |

### پیوست D: الگوریتم یافتن تعادل نش

```
برای هر استراتژی i از فروشنده 1:
    برای هر استراتژی j از فروشنده 2:
        محاسبه سود فروشنده 1 با استراتژی (i, j)
        محاسبه سود فروشنده 2 با استراتژی (i, j)
        
        اگر i بهترین پاسخ فروشنده 1 به j باشد:
            و j بهترین پاسخ فروشنده 2 به i باشد:
                (i, j) یک تعادل نش است
```
